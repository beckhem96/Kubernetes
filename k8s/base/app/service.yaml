# =============================================================================
# Application Service
# =============================================================================
# 목적: 애플리케이션 Pod들을 클러스터 내부에서 접근 가능하게 노출
#
# 서비스 타입:
# - ClusterIP: 클러스터 내부에서만 접근 가능 (기본값, 가장 안전)
# - NodePort: 노드의 특정 포트로 외부 노출
# - LoadBalancer: 클라우드 LB를 통한 외부 노출
#
# 여기서는 ClusterIP를 사용하고, 외부 접근은 Ingress를 통해 처리
# =============================================================================
apiVersion: v1
kind: Service
metadata:
  name: myapp-service
  labels:
    app: myapp
    component: backend
spec:
  # 트래픽을 받을 Pod 선택
  selector:
    app: myapp
    component: backend

  ports:
    - name: http
      protocol: TCP
      port: 80              # 서비스가 노출하는 포트 (다른 Pod에서 접근 시 사용)
      targetPort: 8080      # 실제 컨테이너 포트로 전달

  # ClusterIP: 내부 전용 (Ingress를 통해 외부 노출)
  type: ClusterIP
